<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Shell | Aurélien Loyer</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <meta name="description" content="Détails du projet Mini Shell d'Aurélien Loyer, un shell simplifié en langage C.">
    <style>
        .terminal-container {
            background-color: #1e1e1e;
            border-radius: 8px;
            padding: 10px;
            margin: 20px 0;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
        }
        
        .terminal-header {
            background-color: #333;
            padding: 8px 12px;
            border-radius: 8px 8px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: -10px -10px 10px -10px;
        }
        
        .terminal-title {
            color: #fff;
            font-size: 14px;
            font-weight: 500;
        }
        
        .terminal-buttons {
            display: flex;
        }
        
        .terminal-button {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 8px;
        }
        
        .button-red {
            background-color: #ff5f56;
        }
        
        .button-yellow {
            background-color: #ffbd2e;
        }
        
        .button-green {
            background-color: #27c93f;
        }
        
        .terminal-content {
            color: #f8f8f2;
            white-space: pre-wrap;
            line-height: 1.5;
            min-height: 280px;
        }
        
        .terminal-input {
            display: flex;
            align-items: center;
            margin-top: 10px;
        }
        
        .terminal-prompt {
            color: #50fa7b;
            margin-right: 8px;
        }
        
        .terminal-command {
            background: transparent;
            border: none;
            color: #f8f8f2;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            flex-grow: 1;
            outline: none;
        }

        .light-theme .terminal-container {
            background-color: #2a2a2a;
        }
        
        .light-theme .terminal-header {
            background-color: #444;
        }
        
        .light-theme .terminal-content,
        .light-theme .terminal-command {
            color: #e6e6e6;
        }
        
        .try-it-button {
            margin-top: 15px;
            padding: 10px 20px;
            background-color: #50fa7b;
            color: #1e1e1e;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .try-it-button:hover {
            background-color: #2ebd5a;
        }
        
        .light-theme .try-it-button {
            background-color: #2ebd5a;
            color: #fff;
        }
        
        .light-theme .try-it-button:hover {
            background-color: #1a9043;
        }
    </style>
</head>
<body>
    <!-- Loader -->
    <div class="loader-wrapper">
        <div class="loader">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>

    <!-- Navbar -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">AL<span class="dot">.</span></a>
            </div>
            <div class="nav-menu">
                <ul class="nav-links">
                    <li><a href="index.html#home" class="nav-link">Accueil</a></li>
                    <li><a href="index.html#about" class="nav-link">À propos</a></li>
                    <li><a href="index.html#skills" class="nav-link">Compétences</a></li>
                    <li><a href="index.html#projects" class="nav-link active">Projets</a></li>
                    <li><a href="index.html#contact" class="nav-link">Contact</a></li>
                </ul>
                <div class="nav-actions">
                    <button class="theme-toggle" id="theme-toggle" aria-label="Changer de thème">
                        <i class="fas fa-moon"></i>
                    </button>
                    <a href="cv_loyeraurelien.pdf" class="btn btn-outline" target="_blank">
                        <i class="fas fa-file-alt"></i> Mon CV
                    </a>
                </div>
            </div>
            <div class="hamburger" id="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Project Header -->
    <section class="project-header">
        <div class="container">
            <div class="breadcrumb">
                <a href="index.html">Accueil</a> / 
                <a href="index.html#projects">Projets</a> / 
                <span>Mini Shell</span>
            </div>
            <h1 class="project-title">Mini Shell</h1>
            <div class="project-meta">
                <div class="meta-item">
                    <i class="fas fa-calendar-alt"></i>
                    <span>2024</span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-code"></i>
                    <span>C</span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-terminal"></i>
                    <span>Shell</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Project Content -->
    <section class="project-content">
        <div class="container">
            <div class="project-details">
                <div class="project-demo">
                    <h2>Démonstration</h2>
                    <div class="video-container">
                        <video controls>
                            <source src="videos/mini_shell_demo.mp4" type="video/mp4">
                            Votre navigateur ne supporte pas la lecture de vidéos.
                        </video>
                    </div>
                </div>

                <div class="project-overview">
                    <h2>Aperçu du projet</h2>
                    <p>
                        Mini Shell est un interpréteur de commandes simplifié développé en langage C. Ce projet avait pour objectif de créer un terminal capable d'exécuter des commandes de base du système Unix et de gérer différentes fonctionnalités intégrées (builtins).
                    </p>
                </div>

                <div class="project-features">
                    <h2>Fonctionnalités</h2>
                    <ul>
                        <li><i class="fas fa-check-circle"></i> Exécution de commandes externes (ls, cat, grep, etc.)</li>
                        <li><i class="fas fa-check-circle"></i> Gestion des commandes intégrées (cd, exit, env, setenv, unsetenv)</li>
                        <li><i class="fas fa-check-circle"></i> Support des variables d'environnement</li>
                        <li><i class="fas fa-check-circle"></i> Gestion du changement de répertoire</li>
                        <li><i class="fas fa-check-circle"></i> Gestion des erreurs et des exceptions</li>
                    </ul>
                </div>

                <div class="project-technical">
                    <h2>Aspects techniques</h2>
                    <p>
                        Ce shell a été implémenté en C, en utilisant diverses fonctions système comme fork(), execve(), waitpid() pour la gestion des processus enfants. L'environnement système est géré à travers une structure de données personnalisée permettant la manipulation des variables d'environnement.
                    </p>
                    
                    <h3>Essayez le Mini Shell en direct!</h3>
                    
                    <div class="terminal-container" id="terminalContainer">
                        <div class="terminal-header">
                            <div class="terminal-buttons">
                                <div class="terminal-button button-red"></div>
                                <div class="terminal-button button-yellow"></div>
                                <div class="terminal-button button-green"></div>
                            </div>
                            <div class="terminal-title">Mini Shell</div>
                            <div style="width: 50px;"></div>
                        </div>
                        <div class="terminal-content" id="terminalContent">Chargement de Mini Shell...</div>
                        <div class="terminal-input">
                            <span class="terminal-prompt">$></span>
                            <input type="text" class="terminal-command" id="terminalCommand" placeholder="Tapez une commande..." />
                        </div>
                    </div>
                    
                    <button class="try-it-button" id="launchShellBtn">
                        <i class="fas fa-terminal"></i> Lancer Mini Shell
                    </button>
                </div>

                <div class="project-challenges">
                    <h2>Défis et solutions</h2>
                    <div class="challenge-item">
                        <h3><i class="fas fa-exclamation-triangle"></i> Gestion des processus</h3>
                        <p>
                            Un des principaux défis était la gestion correcte des processus enfants pour éviter les fuites de mémoire et les processus zombies. J'ai résolu ce problème en implémentant un système robuste de suivi des processus avec waitpid().
                        </p>
                    </div>
                    <div class="challenge-item">
                        <h3><i class="fas fa-exclamation-triangle"></i> Manipulation de l'environnement</h3>
                        <p>
                            La gestion des variables d'environnement nécessitait une attention particulière, notamment pour les commandes setenv et unsetenv. J'ai développé une structure de données dédiée pour faciliter ces opérations.
                        </p>
                    </div>
                </div>

                <div class="project-learnings">
                    <h2>Ce que j'ai appris</h2>
                    <p>
                        Ce projet m'a permis d'approfondir mes connaissances sur:
                    </p>
                    <ul>
                        <li>Le fonctionnement interne des shells Unix</li>
                        <li>La gestion des processus en C</li>
                        <li>Les appels système Linux/Unix</li>
                        <li>La manipulation avancée de chaînes de caractères</li>
                        <li>La gestion efficace de la mémoire</li>
                    </ul>
                </div>

                <div class="project-links">
                    <h2>Liens</h2>
                    <a href="https://github.com/aurelien-loyer/mini_shell" class="btn btn-primary" target="_blank">
                        <i class="fab fa-github"></i> Code source
                    </a>
                </div>
            </div>

            <div class="other-projects">
                <h2>Autres projets</h2>
                <div class="projects-grid small-grid">
                    <div class="project-card" data-category="csfml">
                        <div class="project-image-placeholder"></div>
                        <div class="project-info">
                            <h3 class="project-title">My Radar</h3>
                            <p class="project-description">Simulateur de contrôle aérien avec CSFML</p>
                            <a href="my_radar.html" class="project-link">Voir les détails <i class="fas fa-arrow-right"></i></a>
                        </div>
                    </div>

                    <div class="project-card" data-category="c">
                        <div class="project-image-placeholder"></div>
                        <div class="project-info">
                            <h3 class="project-title">Organized</h3>
                            <p class="project-description">Programme d'organisation de données</p>
                            <a href="organized.html" class="project-link">Voir les détails <i class="fas fa-arrow-right"></i></a>
                        </div>
                    </div>

                    <div class="project-card" data-category="python">
                        <div class="project-image-placeholder"></div>
                        <div class="project-info">
                            <h3 class="project-title">105demography</h3>
                            <p class="project-description">Analyse démographique en Python</p>
                            <a href="105demography.html" class="project-link">Voir les détails <i class="fas fa-arrow-right"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <a href="index.html">AL<span class="dot">.</span></a>
                    <p>Développeur passionné</p>
                </div>
                
                <div class="footer-links">
                    <h3>Liens rapides</h3>
                    <ul>
                        <li><a href="index.html#home">Accueil</a></li>
                        <li><a href="index.html#about">À propos</a></li>
                        <li><a href="index.html#skills">Compétences</a></li>
                        <li><a href="index.html#projects">Projets</a></li>
                        <li><a href="index.html#contact">Contact</a></li>
                    </ul>
                </div>
                
                <div class="footer-social">
                    <h3>Me suivre</h3>
                    <div class="social-icons">
                        <a href="https://github.com/aurelien-loyer" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                        <a href="https://www.linkedin.com/in/aurelien-loyer-epi/" target="_blank">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a href="mailto:aurelien.loyer@epitech.eu">
                            <i class="fas fa-envelope"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>© 2025 Aurélien Loyer. Tous droits réservés.</p>
                <a href="#" class="back-to-top">
                    <i class="fas fa-arrow-up"></i>
                </a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Loader
            setTimeout(() => {
                document.querySelector('.loader-wrapper').style.opacity = '0';
                setTimeout(() => {
                    document.querySelector('.loader-wrapper').style.display = 'none';
                }, 500);
            }, 1000);

            // Mobile Menu Toggle
            const hamburger = document.getElementById('hamburger');
            const navMenu = document.querySelector('.nav-menu');
            
            hamburger.addEventListener('click', function() {
                this.classList.toggle('active');
                navMenu.classList.toggle('active');
            });

            // Sticky Header
            window.addEventListener('scroll', function() {
                const navbar = document.getElementById('navbar');
                if (window.scrollY > 50) {
                    navbar.classList.add('sticky');
                } else {
                    navbar.classList.remove('sticky');
                }
            });

            // Dark/Light Theme Toggle
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = themeToggle.querySelector('i');
            const currentTheme = localStorage.getItem('theme') || 'dark';
            
            // Set initial theme
            if (currentTheme === 'light') {
                document.body.classList.add('light-theme');
                themeIcon.classList.replace('fa-moon', 'fa-sun');
            }
            
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('light-theme');
                
                if (document.body.classList.contains('light-theme')) {
                    localStorage.setItem('theme', 'light');
                    themeIcon.classList.replace('fa-moon', 'fa-sun');
                } else {
                    localStorage.setItem('theme', 'dark');
                    themeIcon.classList.replace('fa-sun', 'fa-moon');
                }
            });

            // Smooth scrolling
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    
                    window.scrollTo({
                        top: targetElement.offsetTop - 70,
                        behavior: 'smooth'
                    });
                });
            });
            
            // Mini Shell functionality
            let shellProcess = null;
            const terminalContent = document.getElementById('terminalContent');
            const terminalCommand = document.getElementById('terminalCommand');
            const terminalContainer = document.getElementById('terminalContainer');
            const launchShellBtn = document.getElementById('launchShellBtn');
            
            // Function to start the shell process
            function startShell() {
                terminalContent.textContent = "Démarrage de Mini Shell...\n";
                
                try {
                    // Create a new Web Worker to communicate with the shell executable
                    if (window.Worker) {
                        // Create a worker script to handle shell communication
                        const workerBlob = new Blob([`
                            // This is a simulated worker for shell interaction
                            self.addEventListener('message', function(e) {
                                if (e.data.type === 'command') {
                                    // Simulate sending command to shell
                                    const command = e.data.command;
                                    
                                    // Mock response based on command
                                    let response;
                                    if (command === 'ls') {
                                        response = "mysh\nREADME.md\nsrc/\ninclude/\nMakefile";
                                    } else if (command === 'pwd') {
                                        response = "/home/user/mini_shell";
                                    } else if (command === 'echo hello') {
                                        response = "hello";
                                    } else if (command.startsWith('cd ')) {
                                        response = ""; // cd usually has no output on success
                                    } else if (command === 'help') {
                                        response = "Commandes disponibles:\n- ls: liste les fichiers\n- pwd: affiche le répertoire courant\n- cd: change de répertoire\n- exit: quitte le shell";
                                    } else if (command === 'exit') {
                                        response = "Fermeture du shell...";
                                        self.postMessage({type: 'exit'});
                                        return;
                                    } else {
                                        response = \`\${command}: commande non trouvée\`;
                                    }
                                    
                                    self.postMessage({
                                        type: 'output',
                                        output: response
                                    });
                                }
                            });
                            
                            // Initial startup message
                            self.postMessage({
                                type: 'ready', 
                                output: "Mini Shell v1.0 démarré\\nTapez 'help' pour voir les commandes disponibles\\nTapez 'exit' pour quitter"
                            });
                        `], {type: 'application/javascript'});
                        
                        const workerUrl = URL.createObjectURL(workerBlob);
                        shellProcess = new Worker(workerUrl);
                        
                        shellProcess.onmessage = function(e) {
                            if (e.data.type === 'ready' || e.data.type === 'output') {
                                terminalContent.textContent += e.data.output + "\n";
                                terminalContent.scrollTop = terminalContent.scrollHeight;
                            } else if (e.data.type === 'exit') {
                                setTimeout(() => {
                                    stopShell();
                                }, 1000);
                            }
                        };
                        
                        shellProcess.onerror = function(error) {
                            terminalContent.textContent += "Erreur: " + error.message + "\n";
                            stopShell();
                        };
                        
                        // Enable command input
                        terminalCommand.disabled = false;
                        terminalCommand.focus();
                        
                        // Change button text
                        launchShellBtn.innerHTML = '<i class="fas fa-stop"></i> Arrêter Mini Shell';
                        launchShellBtn.classList.add('active');
                    } else {
                        terminalContent.textContent += "Votre navigateur ne supporte pas les Web Workers, nécessaires pour exécuter le shell.\n";
                    }
                } catch (error) {
                    terminalContent.textContent += "Erreur lors du démarrage du shell: " + error.message + "\n";
                }
            }
            
            // Function to stop the shell process
            function stopShell() {
                if (shellProcess) {
                    shellProcess.terminate();
                    shellProcess = null;
                }
                
                terminalContent.textContent += "Shell arrêté.\n";
                
                // Disable command input
                terminalCommand.disabled = true;
                
                // Reset button
                launchShellBtn.innerHTML = '<i class="fas fa-terminal"></i> Lancer Mini Shell';
                launchShellBtn.classList.remove('active');
            }
            
            // Toggle shell start/stop
            launchShellBtn.addEventListener('click', function() {
                if (shellProcess) {
                    stopShell();
                } else {
                    startShell();
                }
            });
            
            // Handle command input
            terminalCommand.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' && !e.shiftKey && shellProcess) {
                    e.preventDefault(); // Empêcher le comportement par défaut
                    
                    const command = this.value.trim();
                    
                    if (command) {
                        // Display command in terminal
                        terminalContent.textContent += "$> " + command + "\n";
                        
                        // Send command to shell process
                        shellProcess.postMessage({
                            type: 'command',
                            command: command
                        });
                        
                        // Clear input
                        this.value = '';
                    }
                }
            });
            
            // Focus on the input field when clicking anywhere in the terminal container
            terminalContainer.addEventListener('click', function() {
                if (!terminalCommand.disabled) {
                    terminalCommand.focus();
                }
            });
            
            // Prevent focus loss when typing in the terminal
            terminalCommand.addEventListener('blur', function() {
                if (shellProcess) {
                    // Small delay to allow for click events elsewhere
                    setTimeout(() => {
                        // Only refocus if shell is still running
                        if (shellProcess && document.activeElement !== terminalCommand) {
                            terminalCommand.focus();
                        }
                    }, 100);
                }
            });
            
            // Disable command input initially
            terminalCommand.disabled = true;
        });
    </script>
</body>
</html>
